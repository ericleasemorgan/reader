<html>
<head>
	<script>
		var documentsURL = "../etc/model-data.txt";
		var stopwordsURL = "../etc/stopwords.txt";
	</script>
	<script type="text/javascript" src="../js/d3.min.js"></script>
	<script type="text/javascript" src="../js/xregexp-all-min.js"></script>
	<link type='text/css' rel='stylesheet' href='../js/jslda.css'>
</head>
<body>

<h1>Topic model</h1>

<p>The input for this page is the summary data ("abstracts") of each item in the study carrel. Use this page to first enumerate sets of latent themes ("topics"). Then use the other functions of the page to visualize the results, refine the themes, and download files for offline analysis. This page's functionality is wholly derived from David Mimno's Javascript library called "<a href="https://github.com/mimno/jsLDA">jsLDA</a>".</p>

<div id="tooltip"></div>

	<div id="main">
		<div id="form" class="top">
			<button id="sweep">Run 50 iterations</button>
			Iterations: <span id="iters">0</span>
			<span id="num_topics_control">Train with <input id="num-topics-input" type="range" name="topics" value="20" min="5" max="100" oninput="updateTopicCount(this)" onchange="onTopicsChange(this)"/> <span id="num_topics_display">20</span> topics</span>
		</div>

		<div class="sidebar">
			<div id="topics" class="sidebox">
		</div>

	</div>

	<div id="tabwrapper">
		<div class="tabs">
			<ul>
				<li id="docs-tab" class="selected">Topic Documents</li>
				<li id="corr-tab">Topic Correlations</li>
				<li id="ts-tab">Time Series</li>
				<li id="dl-tab">Downloads</li>
				<li id="vocab-tab">Vocabulary</li>
			</ul>
		</div>

		<div id="pages">
			<div id="docs-page" class="page">
			<div class="help">Documents are sorted by their proportion of the currently selected topic, biased to prefer longer documents.</div>
		</div>

		<div id="vocab-page" class="page">
			<div class="help">Words occurring in only one topic have specificity 1.0, words evenly distributed among all topics have specificity 0.0. <button id="showStops">Show stopwords</button>
				<button id="sortVocabByTopic">Sort by topic</button>
			</div>
			<table id="vocab-table">
			<thead><th>Word</th><th>Frequency</th><th>Topic Specificity</th><th>Stoplist</th></thead>
			<tbody></tbody>
			</table>
		</div>

		<div id="ts-page" class="page">
			<div class="help">Documents are grouped by their "date" field (the second column in the input file). These plots show the average document proportion of each topic at each date value. Date values are <i>not</i> parsed, but simply sorted in the order they appear in the input file.</div>
			<div class="help"></div>
		</div>

		<div id="corr-page" class="page">
			<div class="help">Topics that occur together more than expected are blue, topics that occur together less than expected are red.</div>
		</div>

		<div id="dl-page" class="page">
			<div class="help">Each file is in comma-separated format.</div>
			<ul>
			<li><a id="doctopics-dl" href="javascript:;" download="doctopics.csv" onclick="saveDocTopics()">Document topics</a></li>
			<li><a id="topicwords-dl" href="javascript:;" download="topicwords.csv" onclick="saveTopicWords()">Topic words</a></li>
			<li><a id="keys-dl" href="javascript:;" download="keys.csv" onclick="saveTopicKeys()">Topic summaries</a></li>
			<li><a id="topictopic-dl" href="javascript:;" download="topictopic.csv" onclick="saveTopicPMI()">Topic-topic connections</a></li>
			<li><a id="graph-dl" href="javascript:;" download="gephi.csv" onclick="saveGraph()">Doc-topic graph file (for Gephi)</a></li>
			<li><a id="state-dl" href="javascript:;" download="state.csv" onclick="saveState()">Complete sampling state</a></li>
			</ul>
		</div>

	</div>
</div>

<script src="../js/jslda.js"></script>

</body>
</html>

